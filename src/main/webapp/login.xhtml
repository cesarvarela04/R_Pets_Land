<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta charset="UTF-8" />
	<title>PETSLAND||Login</title>
	<meta
		content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'
		name='viewport' />
	<link href="./bootstrap/css/bootstrap.min.css" rel="stylesheet"
		type="text/css" />
	<!-- Font Awesome Icons -->
	<link href="./css/font-awesome.min.css" rel="stylesheet"
		type="text/css" />
	<!-- Ionicons -->
	<link href="./css/ionicons.min.css" rel="stylesheet" type="text/css" />
	<!-- Theme style -->
	<link href="./dist/css/AdminLTE.min.css" rel="stylesheet"
		type="text/css" />
	<!-- AdminLTE Skins -->
	<link href="./dist/css/skins/_all-skins.min.css" rel="stylesheet"
		type="text/css" />
	<link href="./css/login.css" rel="stylesheet" type="text/css" />
	<link href="./css/formvalidation/formValidation.min.css"
		rel="stylesheet" type="text/css" />

	<script src="./js/jquery.min.js" type="text/javascript"></script>
	<script src="./js/bootstrap.min.js" type="text/javascript"></script>
	<script src="./js/formValidation.min.js" type="text/javascript"></script>
	<script src="./js/framework/bootstrap.min.js" type="text/javascript"></script>
	<script src="./src/hello.js" type="text/javascript"></script>
	<script src="./src/modules/google.js"></script>
	<script src="./src/modules/facebook.js"></script>
</h:head>
<body class="skin-green">
	<!-- Site wrapper -->
	<div class="wrapper">

		<header class="main-header">
			<a class="logo"><b>PETSLAND</b></a>
			<!-- Header Navbar: style can be found in header.less -->
			<nav class="navbar navbar-static-top" role="navigation">
				<!-- Sidebar toggle button-->
				<a href="#" class="sidebar-toggle" data-toggle="offcanvas"
					role="button"> <span class="sr-only">Toggle navigation</span> <span
					class="icon-bar"></span> <span class="icon-bar"></span> <span
					class="icon-bar"></span>
				</a>
				

			</nav>
		</header>

		<!-- =============================================== -->
		<!-- Left side column. contains the sidebar -->
		<aside class="main-sidebar">
			<!-- sidebar: style can be found in sidebar.less -->
			<section class="sidebar">

				<!-- sidebar menu: : style can be found in sidebar.less -->
				<ul class="sidebar-menu">

					<li class="header">Panel de Navegación</li>


					<li><a href="./home.xhtml"> <i class="fa fa-home"></i> <span>Pagina
								Principal</span>
					</a></li>

					<!--  
            <li>
              <a href="#{facesContext.externalContext.request.scheme}://#{facesContext.externalContext.request.serverName}:#{facesContext.externalContext.request.serverPort}#{facesContext.externalContext.request.contextPath}/login.xhtml">
                <i class="fa fa-user"></i> <span>Iniciar Sesión</span>
              </a>
            </li>
            -->

					<li class="treeview"><a> <i class="fa fa-plus-square"></i>
							<span>Registrarse</span> <i class="fa fa-angle-left pull-right"></i>
					</a>
						<ul class="treeview-menu">
							<li><a href="./ADMIN/registro.xhtml"><i
									class="fa fa-circle-o"></i> Registro Admin</a></li>
							<li><a href="./USER/registro.xhtml"><i
									class="fa fa-circle-o"></i> Registro Usuario</a></li>
						</ul></li>


				</ul>
			</section>
			<!-- /.sidebar -->
		</aside>


		<!-- =============================================== -->

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<!-- Main content -->
			<section class="content">

				<p:messages autoUpdate="true" />

				<div class="omb_login">
					<h3 class="omb_authTitle">Inicia Sesión</h3>

					<!-- 
			<div class="row omb_row-sm-offset-4 omb_socialButtons " >
				<div class="col-xs-6 col-sm-3">
					<a class="btn btn-lg btn-block omb_btn-facebook"  id="facebook" onclick="hello.login('facebook');"> <i
						class="fa fa-facebook visible-xs"></i> <span class="hidden-xs">Facebook</span>
					</a>
				</div>

				<div class="col-xs-6 col-sm-3">
					<a class="btn btn-lg btn-block omb_btn-google" id="google" onclick="hello.login('google');"> <i
						class="fa fa-google-plus visible-xs"></i> <span class="hidden-xs">Google+</span>
					</a>
				</div>
				
			</div>
		 -->
					<div id="profile" />

					<div class="row omb_row-sm-offset-4 omb_loginOr">
						<div class="col-xs-12 col-sm-6">
							<hr class="omb_hrOr" />
							<span class="omb_spanOr">o</span>
						</div>
					</div>

					<div class="row omb_row-sm-offset-4">
						<div class="col-xs-12 col-sm-6">
							<form id="regexpEmailForm" autocomplete="on"
								action="j_spring_security_check" method="post">
								<div class="form-group">
									<div class="input-group">
										<span class="input-group-addon"><i class="fa fa-user"></i></span>

										<input id="email" type="email" class="form-control"
											name="j_username" placeholder="Correo" required="required" />
									</div>
								</div>

								<div class="input-group">
									<span class="input-group-addon"><i class="fa fa-lock"></i></span>
									<input id="passwordField" type="password" class="form-control"
										name="j_password" placeholder="Contraseña" required="required" />
								</div>

								<br />

								<button id="submit" class="btn btn-lg btn-primary btn-block"
									type="submit">Login</button>
							</form>

						</div>
					</div>

					<br />

					<div align="center">

						<button type="button" class="btn btn-link" data-target="#myModal"
							data-toggle="modal">Olvidaste Contraseña</button>

					</div>
				</div>
				<!-- Modal -->
				<h:form>
					<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
						aria-labelledby="myModalLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">

									<h4 class="modal-title">Recuperar Contraseña</h4>
								</div>
								<div class="modal-body">

									<p:messages autoUpdate="true" closable="true" />

									<p:inputText id="txtCorreoElectronico"
										requiredMessage="El Email es requerido"
										styleClass="form-control" validatorMessage="Email Invalido"
										placeholder="ejemplo@.ejemplo.com"
										value="#{usuariosView.txtUsuEmail}">
										<f:validateRegex
											pattern="^[_A-Za-z0-9-\+\ñ\Ñ\á-ú\Á-Ú]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
									</p:inputText>

								</div>
								<div align="center">
									<p:commandButton value="Recuperar"
										styleClass="btn btn-primary btn-sm"
										action="#{usuariosView.recuperarContrasena()}" />
									<button type="button" class=" btn btn-danger"
										data-dismiss="modal">Cerrar</button>
								</div>
								<br />
							</div>
						</div>
					</div>


				</h:form>

			</section>
			<!-- /.content -->

			<!-- Main content -->
			<section class="content"></section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->

		<footer class="main-footer">
			<div class="pull-right hidden-xs">
				<b>Version</b> 1.0
			</div>
			<strong>Copyright 2015-2016 <a
				href="http://almsaeedstudio.com">Almsaeed Studio</a>.
			</strong> All rights reserved.
		</footer>
	</div>
	<!-- ./wrapper -->


	<!-- knockout.js -->
	<script src="./js/knockout.js" type="text/javascript"></script>

	<script>    
 	hello( 'google').logout({force:true},function(e){
		log("logout-force",e);
	});
 	
 	hello( 'facebook' ).logout({force:true},function(e){
		log("logout-force",e);
	});
    </script>

	<script>

    hello.init({ 
    	facebook : 356963437842660,
    	google : '1071426054878-4h6407ne7ltg3pdfk9upvsgn5tc6fu7t.apps.googleusercontent.com'
    },{ 
    	scope : 'email',
    	redirect_uri:'redirect.html'
    	});

</script>

	<script>

    hello.on('auth.login', function(auth){
    	
    	// call user information, for the given network
    	hello( auth.network ).api( '/me' ).then( function(r){
    		// Inject it into the container
    		 var label = document.getElementById( "profile_"+ auth.network );
    		//if(!label){
    			label = document.createElement('div');
    			//label.id = "profile_"+auth.network;
    			document.getElementById('profile').appendChild(label);
    			document.getElementById('email').setAttribute('value', r.email)
    			document.getElementById('passwordField').setAttribute('value', r.id)
    			document.getElementById('imagen').setAttribute('src', r.thumbnail)
    			document.getElementById('imagen2').setAttribute('src', r.thumbnail)
    	//	}

    	
    	jQuery.ajax( {    		
        url: '#{facesContext.externalContext.request.scheme}://#{facesContext.externalContext.request.serverName}:#{facesContext.externalContext.request.serverPort}#{facesContext.externalContext.request.contextPath}/rest/login/crearUsuario' +r.name + '/'+ r.id +'/'+ r.email +'/'+'2/',
        type: 'PUT'
        } );
    	
    	setTimeout ("submitFormulario()", 700); 


    	});
    	    	
    });
    
    
    function submitFormulario(){
    	
    	var submitBtn = document.getElementById('submit');
    		if(submitBtn){
    		   submitBtn.click();
            }
    }

   
</script>

	<!-- jQuery 2.1.3 -->
	<script src="./plugins/jQuery/jQuery-2.1.3.min.js"></script>
	<!-- Bootstrap 3.3.2 JS -->
	<script src="./bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<!-- AdminLTE App -->
	<script src="./dist/js/app.min.js" type="text/javascript"></script>
</body>
</html>